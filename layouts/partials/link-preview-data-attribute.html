{{- $page := . -}}
{{- $redFilter := images.Colorize 4 70 100 -}}
{{- $heroParam := cond (isset .Params "hero") .Params.hero .Params.noHero -}}
{{- $attr := "" -}}
{{- with $heroParam -}}
    {{- with $page.Resources.Get . -}}
        {{- with .Fit "512x512 png" | images.Filter $redFilter -}}
            {{- $attr = printf "data-link-preview-src=\"%s\"" .RelPermalink -}}
        {{- end -}}
    {{- end -}}
{{- end -}}
{{- return $attr -}}